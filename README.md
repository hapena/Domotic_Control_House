                                                 # Domotic_Control_House

![image](https://user-images.githubusercontent.com/71275875/170284760-4d65903c-f91c-408b-996d-d94ec361746f.png)

https://youtu.be/qmGS3f5XoQ0

Roles del equipo de trabajo de Domotic-Control House
 
![image](https://user-images.githubusercontent.com/71275875/173895852-15d7b8b2-4a12-411e-9851-708771bb6f9f.png)

-Juan David Gomez Alarcon: Líder su trabajo es comunicar de manera clara con las personas de su equipo. Presta atención a la comunicación no verbal de tus trabajadores y trata de anticiparse a sus problemas y necesidades.

-Juan Manuel Cardona Castillo. Programador su trabajo es programar en python para la realización del código del proyecto por medio de objetos y funciones para el uso de microcontroladores.

- Julian Felipe Garzón Rico: Investigador su trabajo es realizar un estudio del consumo de recursos en los hogares y como con nuestro proyecto podría mejorar a no desperdiciar recursos del hogar. 

- Yoiser Moisés Padrón Rojas: Diseñador su trabajo es crear toda la parte visual del proyecto; maqueta, planos, circuitos eléctricos, logos, imágenes entre otros.


Descripción del proyecto:

El proyecto Domotic-Control-House se plantea en el contexto de la revolución industrial 4.0 y el uso de las TI en el ámbito urbano; debido a la constante necesidad del uso adecuado de los recursos naturales y en la búsqueda de incrementar y mejorar nuestra calidad de vida el proyecto nos ayuda a aprovechar al máximo todos los recursos que tenemos a nuestro servicio. Esto porque se puede programar y automatizar; abrir, cerrar, apagar, encender y regular los electrodomésticos, la climatización, la ventilación o la iluminación artificial. También se puede regular el funcionamiento de las persianas, puertas, cortinas, riego, suministro de agua o gas y en general casi todos los aparatos electrónicos y una muy buena cantidad de dispositivos en el hogar.

Según Triana W. (2020). El cambio climático y el agotamiento de los recursos convierten la eficiencia energética en un asunto social clave. Con ahorros en el consumo energético, la Domótica nos permite contribuir a la preservación del planeta sin renunciar al máximo de confort. Por otro lado Endesa(2021) ,indica que  Estudios del Instituto para la Diversificación y Ahorro de la Energía (IDAE) apuntan que la domótica puede llegar a ahorrar un 39% en calefacción, un 27% de agua caliente, un 12% en electrodomésticos, un 9% en iluminación y un 2% en aire acondicionado.

El proyecto Domotic-Control-House nos permite aplicar una gestión eficiente en el consumo de energía, seguridad y confort; que mejoran la habitabilidad, aumentan la seguridad y potencian a largo plazo el ahorro de agua, energía y dinero. Este proyecto utiliza sensores, sistemas motorizados, tecnologías inalámbricas y la integración directa con teléfonos celulares para establecer comunicación entre el sistema y el usuario a través de un Telegram Bot API; aplicaciones de software programadas para interactuar con el usuario de Domotic-Control-House a través del chat. Sus acciones y respuestas han sido creadas con el objetivo de tener control total de la vivienda que realiza tareas repetitivas, predefinidas y automatizadas; está diseñado para sustituir el accionar humano por lo que pueden trabajar de una manera eficiente en la administración de recursos en el hogar.

El proyecto Domotic-Control-House busca crear una solución que ayude a alcanzar 4 de los 17 Objetivos de Desarrollo Sostenible (ODS), los cuales buscan obtener de manera equilibrada tres dimensiones del desarrollo sostenible: el ámbito económico, social y ambiental. Estos Objetivos son:

3. Salud y Bienestar
7. Energía asequible y no Contaminante
11. Ciudades y Comunidades Sostenibles
13. Acción por el Clima

La Academia Cisco del colegio Jorge Gaitán Cortés utilizará cómo herramientas mediadoras la programación en Python, los conceptos de Internet de las Cosas y Devnet. En el proyecto participarán estudiantes de grado undécimo de la academia CISCO, quienes generarán prototipos del sistema de control Domotic-Control-House. Debido a todo lo anterior el sistema creado se podrá ir mejorando y actualizando según las tecnologías que vayan saliendo en el mercado. El proyecto será asesorado por los instructores de la Academia SED-CISCO Jorge Gaitán Cortes IED.
El enfoque trabajado en la Academia SED-CISCO Jorge Gaitán Cortes IED es el enfoque STEM basada en los  principios, Ciencia, Tecnología, Ingeniería y Matemáticas permitiendo a los estudiantes a trabajar en equipo, aumentar su  creatividad en la resolución de problemas, mejorar su pensamiento crítico, mejorar  su  autoestima y su capacidad de comunicación.

Los estudiantes de la Academia SED-CISCO Jorge Gaitán Cortes IED están en proceso de certificación CISCO en Partner: PCAP - Programming Essentials in Python, IoT Fundamentals: Connecting Things, Linux y Devnet.

Se cuenta con el material de laboratorio ofrecido por la institución educativa; entre ellos las plataformas de desarrollo basadas en hardware Libre, (Raspberry Pi 4 Modelo B 4gb Kit, Esp32 Wifi + Bluetooth 4.2 Ble Nodemcu Esp32s), sensores y actuadores; además en la parte del software se trabaja, Python 3, Micropython v1.17, Editores como VsCode,  Thonny IDE, y las plataformas de desarrollo de Cisco Webex Teams.

Problema:

Estudios Preliminares: Agua y energía

Según Ruiz, L.(2020) el desperdicio de agua en Colombia es del 43 %; indica que  si a eso le sumamos la contaminación que recibe el Río Bogotá a diario, la cifra aumenta. Agrega que Colombia está entre los 20 países con mayor cantidad de agua en el mundo, pero las altas temperaturas, debido al calentamiento global y al desperdicio de los recursos, podrían causar que en los próximos años el 75 % del país sufra de desabastecimiento.  Por eso diferentes entidades trabajan para generar consciencia debido a las malas prácticas en empresas y hogares.

Por otro lado Riaño, N. (2017).  Afirma que las malas prácticas de la población frente al agua también contribuyen a su despilfarro. Desde usuarios que realizan un uso indebido de este líquido hasta errores en la medición, la facturación o condiciones fraudulentas de los clientes.


![image](https://user-images.githubusercontent.com/71275875/173895974-2115c0b2-c188-4be2-85c2-374ed2d74e7a.png)

Tomado de: La Republica. https://www.larepublica.co/responsabilidad-social/cuatro-de-cada-10-litros-de-agua-potable-se-malgastan-en-colombia-2530612 

Según Enersinc(2017). Los consumos de energía en el sector residencial Urbano se dan básicamente por la refrigeración, iluminación y cocción, siendo esta última la que ocupa el mayor porcentaje (46%) en relación con todos los factores identificados (climatización, calentamiento de agua, iluminación, entre otros).
Teniendo en cuenta lo anterior y con el objetivo de mejorar el uso de la energía y lograr la meta de ahorro en 0,79% en el periodo comprendido entre los años 2016 y el 2021, diferentes entidades han desarrollado en los últimos años estrategias para que todas las zonas del país sean cada vez más eficientes en el uso de la energía, a través de nuevos equipos. Enersinc(2017). 

VARGAS P. (2016) sostiene que según estudios el país malgasta el 10 por ciento de toda la energía que produce, unos 6.000 gigavatios hora año en todos los sectores: industrial, residencial, comercial, salud y público. Añade que, discriminado por tipo de consumidor, en la residencial y pequeños negocios se presentó un crecimiento de 6,72 %.

![image](https://user-images.githubusercontent.com/71275875/173896059-461c6c42-5ee4-4408-9d40-ea3646e2def5.png)

Tomado de: Departamento Nacional de planeación. https://www.dnp.gov.co/Crecimiento-Verde/Documents/ejes-tematicos/Energia/MCV%20-%20Energy%20Demand%20Situation%20VF.pdf 

Pregunta problema     

¿Es posible aplicar las TI y el Internet de las Cosas para una gestión eficiente en el consumo de energía, seguridad y confort que mejoren la habitabilidad, aumente la seguridad y potencie a largo plazo el ahorro de agua, energía y dinero en viviendas residenciales de la localidad de Engativá en Bogotá?

Objetivo General y objetivos específicos

General:

Diseñar e implementar un Sistema Domótico a través del uso del IoT que permita la integración directa con teléfonos celulares para establecer comunicación entre el sistema y el usuario a través de un Telegram Bot API para tener control total de la vivienda con tareas predefinidas y automatizadas permitiendo gestionar de manera individual e inteligente nuestro consumo diario de recursos.

Específicos:

•	Diseñar el prototipo domótico con el uso de sensores, actuadores, sistemas motorizados, y tecnologías inalámbricas para el control de los aparatos y dispositivos electrónicos.
•	Programar en el sistema las tareas repetitivas, predefinidas y automatizadas a través de la implementación de Python en microcontroladores (Micropython) para sustituir el accionar humano. 
•	Programar el sistema de comunicación utilizando las tecnologías de Telegram Bot API para permitir la interacción a través del chat con el usuario de Domotic-Control-House. 
•	Realizar pruebas y analizar los datos en la aportación del sistema domótico, enfocados en la mejora de la eficiencia en el consumo diario de recursos.


Marco de referencia:

El trabajo se realiza con estudiantes de Ciclo 5 del Colegio Jorge Gaitán Cortes IED ubicado en la localidad 10 de Engativá, colegio del sector oficial que atiende a estudiantes de educación preescolar, básica y media en dos jornadas (mañana y tarde). 

La localidad de Engativá limita al norte con la localidad de Suba, con el río Juan Amarillo y el Humedal Jabeque de por medio; al oriente con las localidades de Barrios Unidos y Teusaquillo, con la Avenida del Congreso Eucarístico de por medio; al sur con la localidad de Fontibón, con las Avenidas José Celestino Mutis y Jorge Eliécer Gaitán de por medio; y al occidente con los municipios de Cota y Funza, con el río Bogotá de por medio.

![image](https://user-images.githubusercontent.com/71275875/173896250-3355cc5f-2b38-4713-8108-038eb59caa2d.png)

Tomado de: https://www.google.com/maps/place/Engativá,+Bogotá/@4.6971531,-74.1536806,13z/data=!3m1!4b1!4m5!3m4!1s0x8e3f9ca931bb3685:0x777bc49f16df0ff4!8m2!3d4.7072598!4d-74.1094635 

Cuenta con 80 sectores catastrales y 4.242 manzanas que representan el 9,7% de las manzanas estratificadas de la ciudad. De éstas el 0,8% corresponden al estrato 1, el 24,7% al estrato 2, el 57,5% al estrato 3, el 3,2% al estrato 4 y el 13,7% fueron clasificadas sin estrato. En cuanto al uso del suelo predomina el residencial (52,6%), seguido por el de servicios (16,1%), el comercial (13,6%) y el dotacional (12,8%) (Secretaría Distrital de Planeación -SDP-, 2018). En los aspectos poblacionales la localidad tenía 878.434 habitantes, equivalentes al 10,9% de la población de Bogotá, estimada en 8.080.734 personas.

Según la SECRETARÍA DISTRITAL DE PLANEACIÓN – SDP(2020)  y el informe de Resultados sobre los indicadores de consumo de agua y energía Eléctrica en Bogotá años 2012 a 2019 indica que “El cambio climático y la sostenibilidad ambiental han sido objeto de atención de la administración distrital en la última década. Combatir el cambio climático requiere de la alineación de incentivos del sector público y privado en torno a la reducción del impacto ambiental de las actividades urbanas y de esta manera garantizar la sostenibilidad ambiental y económica.”

En el informe se ilustran los resultados del indicador de consumo de agua (Lts/Día/Persona) en las edificaciones residenciales por localidad para el año 2019; se evidencia que la localidad de Engativá tuvo un consumo de 78.96 (Lts/Día/Persona)

![image](https://user-images.githubusercontent.com/71275875/173896410-7189d0d6-d192-4d12-850d-3185a3aea494.png)

Tomado de http://www.sdp.gov.co/sites/default/files/informe_final_agua_y_energia-ajustebandera.pdf 

En cuanto a la distribución del consumo de energía se ilustran los resultados del indicador de consumo de energía (kWh/Año/m2) en las edificaciones residenciales por localidad para el año 2019; Se evidencia que la localidad de Engativá tuvo un consumo de 17. (kWh/Año/m2).

![image](https://user-images.githubusercontent.com/71275875/173896486-b5960f3a-4fb8-49cd-8a47-1799b3be3c6c.png)

Tomado de http://www.sdp.gov.co/sites/default/files/informe_final_agua_y_energia-ajustebandera.pdf

Con este panorama, desde la Secretaría Distrital de Planeación, y El Decreto Distrital 566 de 2014 adopta la Política Pública de Ecourbanismo y Construcción Sostenible de Bogotá, cuya primera línea de acción contempla el desarrollo de prácticas sostenibles; además invita sector público y privado en torno a la reducción del impacto ambiental de las actividades urbanas y de esta manera garantizar su sostenibilidad. (SDP, 2020, p.5).

Antecedentes:

1.	Casa inteligente que no requiere energía hecha en Antioquia
En Medellín un grupo de investigadores de la Universidad Pontificia Bolivariana (UPB), luego de recoger diferentes experiencias mundiales del tema, crearon un modelo de una casa que genera su propia energía y aprovecha varios recursos naturales. 

Cuenta con elementos innovadores, como una huerta con sistema de riego automático. Gabriel Jaime López, docente investigador de la Facultad de Ingeniería Eléctrica, explicó que la casa se sustenta en tres pilares:1. La resiliencia, por su capacidad de adaptarse al cambio climático y a la movilidad eléctrica2. La eficiencia, pues genera su energía a través de un sistema de batería que se recarga con paneles solares3. El aprovechamiento de los recursos, gracias a un sistema biodigestor que genera gas metano el cual sirve para calentar los espacios

![image](https://user-images.githubusercontent.com/71275875/173896579-d67b8e55-b2a3-4776-a5d4-ba88a65db375.png)

Tomado de:   https://www.elcolombiano.com/antioquia/una-casa-autosuficiente-se-usara-como-laboratorio-de-investigacion-IN7852208

2.	Universidad Católica Andrés Bello

“Sistema domótico para control de temperatura e iluminación de un apartamento para lesionados medulares”
En el presente se propone un diseño de software y hardware para el control de la iluminación y la temperatura para una vivienda para lesionados medulares (parapléjicos). Este sistema de automatización está constituido principalmente por una placa de desarrollo diseñada por Arduino e Intel conocida como Arduino Intel Galileo, cuya función en este sistema es de actuar como servidor e interactuar con los dispositivos que conforman el sistema domótico (luces, cortinas, aire acondicionado) y una aplicación para dispositivos móviles con sistema operativo Android con la cual el usuario podrá monitorear y controlar el sistema.
URL tomada de https://oaji.net/articles/2019/7118-1556285422.pdf

3.	La vivienda iluminada” o Casa + Spacio

Situada en Torrejón de Ardoz (Madrid, España) y construida por la empresa +Spacio. En 2014, fue catalogada como el mejor proyecto de domótica del año. En esta casa, la iluminación, la climatización, estores y persianas, la difusión sonora, el sistema de seguridad, la depuradora de la piscina y el sistema de riego de la vivienda, son controlables desde un único dispositivo: el móvil o la tablet. De este modo, es posible optimizar mucho mejor el consumo de energía, agua y electricidad.

![image](https://user-images.githubusercontent.com/71275875/173896709-8364fe17-e79b-4227-8a12-592bedd15204.png)

URL Imagen tomada de: ttps://www.elmundo.es/economia/2015/04/22/55375859ca4741d1448b4575.html

4.	La casa de Bill Gates “Xanadu 2.0”

En su construcción participaron 300 obreros, 100 de los cuales fueron electricistas para que la mansión fuera además un centro tecnológico.
El nivel de tecnología es tal que incluso permite que cada huésped cambie parte de sus paredes con un dispositivo que se le entrega al ingresar a la casa. Con él también puede calibrar la temperatura de los ambientes en que se encuentre.

![image](https://user-images.githubusercontent.com/71275875/173896821-390cc394-23da-416d-90c2-77c0d0d55fc1.png)

 Tomadadehttps://www.eluniverso.com/entretenimiento/gente/xanadu-20-asi-es-la-mansion-de-150-millones-de-dolares-de-melinda-y-bill-gates-nota/
 
 Ambiente de desarrollo:
 
Los estudiantes llevan a cabo tareas o proyectos que tienen que ver con su contexto, o donde este es simulado mediante actividades enfocadas a la solución de problemas. Esta metodología permite reconstruir escenarios que pueden ser analizados por los estudiantes. Las situaciones del entorno relacionadas con la tecnología son fuentes de reflexión y aprendizaje muy valiosas para identificar sus efectos en el mejoramiento de la calidad de vida de los miembros de la comunidad.

![image](https://user-images.githubusercontent.com/71275875/173896918-fd16729e-552b-4849-8d76-2d99d7822cfd.png)![image](https://user-images.githubusercontent.com/71275875/173896943-d6ea217b-3f2a-46b2-b9b7-1112821201d6.png)

![image](https://user-images.githubusercontent.com/71275875/173896969-9877e6a7-c09d-43e8-bfdd-88dcffc783d5.png)![image](https://user-images.githubusercontent.com/71275875/173896995-e2582b5f-4ae6-461f-8394-e3079e986b41.png)

Desarrollo del proyecto:

En este apartado se procederá a explicar el contenido el cual es la base para que el programa funcione de la manera establecida, se abordarán aspectos del código y se profundizará en el circuito conformado para este proyecto.

Recursos:

Hardware:

Tarjeta ESP32: ESP32 es la denominación de una familia de chips Soc de bajo costo y consumo de energía, con tecnología Wi-Fi y Bluetooht de modo dual integrada. El ESP32 emplea un microprocesador Tensilica Xtensa LX6 en sus variantes de simple y doble núcleo e incluye interruptores de antena, balun de radiofrecuencia, amplificador de potencia, amplificador receptor de bajo ruido, filtros, y módulos de administración de energía. El ESP32 fue creado y desarrollado por Epressif Systems y es fabricado por TSMC utilizando su proceso de 40 nm. Es un sucesor de otro SoC, el ESP8266. 

![image](https://user-images.githubusercontent.com/71275875/173897082-63ecf1b9-e755-4da8-ae84-b8d944269985.png)

MQ-7: El sensor MQ-7 permite medir gas de Monóxido de Carbono (CO), ideal para detectar concentraciones de dañinas de CO en el aire y así evitar sus daños en la salud. El sensor MQ-7 puede detectar concentraciones en el rango de 20 a 2000ppm.

![image](https://user-images.githubusercontent.com/71275875/173897143-95942380-78c1-4e4a-a2a4-5d9bb4a90904.png)

Sensor DHT11: Es un sensor digital de temperatura y humedad relativa de bajo costo y fácil uso. Integra un sensor capacitivo de humedad y un termistor para medir el aire circundante, y muestra los datos mediante una señal digital en el pin de datos (no posee salida analógica).                               

![image](https://user-images.githubusercontent.com/71275875/173897207-baff4355-8785-45d2-b40b-ba8a866eaf2b.png)

Servomotor: También llamado servo, son dispositivos de accionamiento para el control de precisión de velocidad, par motor y posición. Constituyen un mejor desempeño y precisión frente a accionamientos mediante convertidores de frecuencia, ya que éstos no nos proporcionan control de posición y resultan poco efectivos en bajas velocidades.

![image](https://user-images.githubusercontent.com/71275875/173897302-f7089ec4-eb5e-4c2d-8d6d-4f387d6f438e.png)

Ventilador 12V: Ventilador mide 80x80x25mm y funciona a 12V. Es muy común en los ordenadores y sirve también para ventilar todo tipo de proyectos que sean propensos a calentarse demasiado y queramos que se mantengan frescos. 

![image](https://user-images.githubusercontent.com/71275875/173897328-10e5bc5f-27e2-409e-b8f9-4c05d463e7bb.png)

Panel solar 1.5v : Los paneles solares son el intermediario que hace que la luz solar nos sirva de energía. Su diseño es simple, muy eficaz y permite el autoconsumo, lo que fomenta la sostenibilidad. 

![image](https://user-images.githubusercontent.com/71275875/173897455-59920f26-60ab-47b4-8f0e-6d27c47034ee.png)

Sensor de agua:  Produce una señal analógica proporcional a la humedad detectada, o al nivel de agua que recoja. Es un sensor de pequeñas dimensiones pensado para detectar el agua de lluvia o bien pequeñas modificaciones de nivel de agua (Un par de cm) para detectar filtraciones o fugas de líquido.

![image](https://user-images.githubusercontent.com/71275875/173897479-565c3a7b-a431-41b8-a6d4-48c46507856c.png)

Timbre electrónico: Aparato eléctrico sonoro de bajo voltaje en cuyo interior se distinguen cuatro componentes, el pulsador, el electroimán, el tornillo y la unidad de campana o campanilla. También es llamado pulsador o llamador. Su función es emitir un sonido.

![image](https://user-images.githubusercontent.com/71275875/173897510-cfe68e54-145d-4234-a2ea-02b045f65e68.png)

Módulo de relé de 4 canales: Este lo utilizamos como un puente al alto voltaje que manejaba el bombillo y ventilador; estimulado por una corriente eléctrica muy débil, abre o cierra un circuito en el cual se disipa una potencia mayor que en el circuito estimulador.

![image](https://user-images.githubusercontent.com/71275875/173897540-e9e811be-e4c8-4fa4-8ae9-04009ea001fd.png)

Fotorresistencia LDR: Es un dispositivo electrónico foto-resistor que cuya resistencia depende de la intensidad de luz que incide sobre su superficie, a mayor cantidad de luz menor resistencia presentara; por lo cual puede determinar la presencia o ausencia de luz.

![image](https://user-images.githubusercontent.com/71275875/173897600-4bd71752-c7b8-423d-80a0-3688d3344cd1.png)

Software:

Thonny: IDE de Python con interfaz gráfica amable para el usuario, cuenta con licencia GPL, contiene un depurador que facilita el reconocimiento de errores en el código y permite el acceso a la consola de Python.

MicroPython: Intérprete del lenguaje de programación de Python que funciona en microcontroladores, este procesa el código de programación y a su vez ejecuta las ordenes generadas en el código directamente en el hardware.

Telegram: Es una aplicación de mensajería enfocada en la velocidad y seguridad, es súper rápida, simple y gratuita. Puedes usar Telegram en todos tus dispositivos al mismo tiempo. Esta app ofrece algunas funcionalidades como lo son la creación de bots y la posibilidad de ser enlazada con diferentes servicios web como IFTTT.
Fritzing: Hardware de código abierto el cual fue utilizado para crear el esquema del circuito de la solución del problema planteado.

VsCode: Visual Studio Code es un editor de código fuente desarrollado por Microsoft para Windows, Linux, macOS y Web. Incluye soporte para la depuración, control integrado de Git, resaltado de sintaxis, de Python.

Wokwi: es un simulador en línea de ESP32 con implementación de micropython, bastante interesante, con diferentes componentes electrónicos. 
Packet Tracer: Es un programa de simulación de redes de CISCO que permite a los estudiantes experimentar con el comportamiento de la red, la programación y el internet de las cosas.

Circuito:

Iniciamos realizando la respectiva conexión de los componentes listados anteriormente, en la parte inferior de las placas de pruebas (protoboard) conectaremos la tarjeta de desarrollo ESP32, ubicándola en la mitad de estas dos para dejar libre ambos costados de conexión de los pines. 

La ESP32 es una tarjeta de desarrollo que nos permitirá controlar y ejecutar nuestro proyecto a través del software que se diseñó, esta tarjeta cuenta con distintos componentes integrados como lo son 30 pines de entrada y salida ADC, GPIO, UART, VSPI, I2C, RTC, DAC, HSPI, TOUCH, I2S que nos permitirá realizar las distintas conexiones de los elementos, cuenta con procesador, conexión inalámbrica wifi y bluetooh. 

Al realizar la conexión en el pin GND de la tarjeta lo enviamos a la línea negativa de la protoboard y el pin 3V3 a la línea positiva de la protoboard de donde se alimentará diferentes elementos para su correcto funcionamiento.


![image](https://user-images.githubusercontent.com/71275875/173897716-0ab90520-0bd4-4fb0-9b18-670659286187.png)

Distribución de Pines:

![image](https://user-images.githubusercontent.com/71275875/173897753-790cc4ec-7f73-4fa2-9a0e-ea5214ad45a7.png)

Después de conectar el módulo a la fuente de la protoboard, procedemos a conectar con jumper hembra-macho los pines del módulo con los pines de la tarjeta ESP32 que nos permitirá controlar el motor de la siguiente manera:
  
Mini bomba de agua 

![image](https://user-images.githubusercontent.com/71275875/173897840-501c18a9-854b-455e-ba45-2eb875cafc66.png)

Conectaremos el sensor de flujo o caudalímetro YF-S401 que nos permitirá monitorear y registrar la cantidad de flujo de líquido que pase a través de él.
 
Caudalímetro YF-401

![image](https://user-images.githubusercontent.com/71275875/173897864-a1477ad1-6e93-4d8c-97a1-593d0d7768b2.png)

RESULTADOS PRELIMINARES:

El código:

El código ha sido escrito en el lenguaje de programación Python con un enfoque orientado a objetos; Se utiliza MicroPython, una implementación del lenguaje de programación Python 3, escrita en C, optimizada para poder ejecutarse en un microcontrolador ESP32.

Para iniciar con el desarrollo del software que nos permitirá ejecutar diferentes actividades procedemos a conectar la ESP32 al equipo de cómputo:
Conexión ESP32 a equipo de computo

![image](https://user-images.githubusercontent.com/71275875/173897906-f580a172-152c-4765-8199-fb06283c9389.png)

Al conectar la ESP32 verificamos en el administrador de dispositivos que el dispositivo sea reconocido en los puertos COM, lo cual nos permitirá tener acceso y trabajar la ESP32 de siguiente manera:

Conexión puerto COM

![image](https://user-images.githubusercontent.com/71275875/173897943-ec35b3f2-4ebf-40a0-9258-27ced0b4fbf8.png)

Verificado que la ESP32 ha sido reconocida en equipo, procedemos abrir el entorno de desarrollo que usaremos para crear y compilar el código que en este caso será Thonny, nos dirigimos al módulo de ejecutar y seleccionamos la opción de elegir interprete, allí seleccionamos nuestro interprete que será "Micropython (ESP32)" y el puerto en donde se encuentra conectado el dispositivo.


Configuración ESP32 en Thonny

![image](https://user-images.githubusercontent.com/71275875/173897981-b5551b10-f935-48c2-be12-15c839a66813.png)

Realizada la respectiva configuración procedemos a subir el sistema que se usara en - en la ESP32 para la cual seleccionamos la en la misma pantalla en la parte inferior la opción de instalar o actualizar firmware.

Nos aparecerá una segunda pantalla donde seleccionaremos el puerto donde está conectada la ESP32 y el archivo con el firmware que usaremos, en este caso el micropython v1.17.

Realizado el proceso anterior procedemos a realizar el programa con su respectivo código que nos permitirá obtener los datos requeridos a través de los elementos instalados en el circuito, este programa se realizará usando Thonny bajo el lenguaje de programación micropython.

Donde se usarán las diferentes librerías que micropython que trae instaladas por defecto como los son Machine (para controlar los dispositivos electrónicos), Utime (configuración de tiempos en los procesos), network y request (envío de solicitudes a través de la red y API), así como otras librerías que se descargaran de la web. 

1.En primer lugar, se importan los módulos “machine, time, urequests, network, DHT11, ADC, PWM y utelegram”, para usar los pines de la tarjeta, leer los diferentes sensores y establecer comunicación Wifi para envío de datos a internet a través del uso de diferentes Apis. 

![image](https://user-images.githubusercontent.com/71275875/173898089-b4b69cb8-2c2c-442f-9a96-f0342f64c9a7.png)

2.Creamos los diferentes objetos que me permitirán realizar la lectura de los diferentes sensores y manipulación de los actuadores.

![image](https://user-images.githubusercontent.com/71275875/173898118-d540d0e1-034d-48a8-85ab-ab106a6c4c69.png)

3.Seguido al paso anterior procedemos a crear una nueva función que va a permitir la conexión Wifi de la tarjeta ESP32 a la red especificada en el fragmento de código "conectaWifi".

![image](https://user-images.githubusercontent.com/71275875/173898152-90c69e0b-47a5-40a7-b62f-49fa883cccbb.png)

4.Luego procedemos a realizar el llamado a la función conectaWifi con las credenciales del usuario. Imprimimos los datos de conexión y creamos las diferentes funciones integradas en un menú del Telegram Bot API para los eventos automatizados y las tareas repetitivas.

![image](https://user-images.githubusercontent.com/71275875/173898187-b181617c-bddd-4895-9776-662a537295a7.png)

5. Desarrollo y utilización de Apis Telegram  y Funciones integradas.

![image](https://user-images.githubusercontent.com/71275875/173898245-7a0a38b9-aa68-4b46-a640-876dfc9bc3fc.png)

Conectando todos los elementos en la protoboard, visualizamos nuestro circuito de la siguiente manera:

Prototipo:

![image](https://user-images.githubusercontent.com/71275875/173898281-a1e04423-04ae-4807-9903-34d2c4ade523.png)

Este es el bot configurado desde la aplicación Telegram para dar respuesta automática a los parámetros que fueron asignados desde la codificación del programa. Se puede saber si es de día o de noche y en ese orden de ideas se apaga la luz automáticamente si está de día o se enciende si es de noche. Como también se pueden mandar comandos de (On y Off) para apagar o encender las luces de manera remota.


![image](https://user-images.githubusercontent.com/71275875/173898337-551e8855-48ce-47b3-8c8a-10e6067672f7.png)![image](https://user-images.githubusercontent.com/71275875/173898360-c3be0218-0ac7-4d0c-a1a2-71a96fe9106a.png)

Se presenta un sistema de ahorro de energía para los diferentes tipos de vivienda, capaz de apagar o encender las luces de manera automática con el uso de un servomotor y un sensor de fotorresistencia; o de manera controlada por medio de una aplicación de mensajería instantánea (Telegram).

Bibliografía.

SECRETARÍA DISTRITAL DE PLANEACIÓN – SDP (2020). informe de Resultados sobre los indicadores de consumo de agua y energía Eléctrica en Bogotá años 2012 a 2019. Dirección de Estudios Macro, http://www.sdp.gov.co/sites/default/files/informe_final_agua_y_energia-ajustebandera.pdf  

Triana W. (06 de octubre de 2020). Domótica,  Confort y responsabilidad con el medio ambiente. Valtio. https://www.valtio.com.co/tecnologia/domotica-confort-y-esponsabilidad-con-el-medio-ambiente/ 

VARGAS P. (2016). El desperdicio de electricidad vale 4 billones de pesos al año. Portafolio. https://www.portafolio.co/economia/gobierno/electricidad-desperdicio-precio-ano-colombia-491546 
Enersinc(2017).Energy Demand Situation in Colombia. Departamento Nacional de planeación. https://www.dnp.gov.co/Crecimiento-Verde/Documents/ejes-tematicos/Energia/MCV%20-%20Energy%20Demand%20Situation%20VF.pdf  
Ruiz, L. (15 de agosto de 2020). ¡Ojo! En Colombia se desperdicia el 43 % del agua. Canal Capital. https://conexioncapital.co/colombia-desperdicia-el-43-porciento-agua/ 
Riaño, N. ( 27 de julio de 2017). Cuatro de cada 10 litros de agua potable se malgastan en Colombia. La Republica. https://www.larepublica.co/responsabilidad-social/cuatro-de-cada-10-litros-de-agua-potable-se-malgastan-en-colombia-2530612   
Endesa(11 agosto 2021). La domótica y el ahorro de energía. Endesa  https://www.endesa.com/es/blog/blog-de-endesa/consejos-de-ahorro/domotica-ahorro-energia 














